<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/pro_background">

    <com.google.android.material.appbar.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/pro_surface">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            app:navigationIcon="@drawable/ic_arrow_back"
            app:titleTextColor="@color/pro_text_primary" />
    </com.google.android.material.appbar.AppBarLayout>

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp">

            <!-- Header card with master toggle -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/card_background"
                android:orientation="vertical"
                android:padding="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal">

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="VEGA Statistical Intelligence"
                            android:textColor="@color/pro_cyan"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="4dp"
                            android:text="Advanced anomaly detection and forecasting"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp" />
                    </LinearLayout>

                    <com.google.android.material.switchmaterial.SwitchMaterial
                        android:id="@+id/masterToggle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />
                </LinearLayout>
            </LinearLayout>

            <!-- Settings container (visible when master is on) -->
            <LinearLayout
                android:id="@+id/settingsContainer"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="gone">

                <!-- ========== TIER 1: ANOMALY DETECTION ========== -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="8dp"
                    android:text="ANOMALY DETECTION"
                    android:textColor="@color/pro_magenta"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:letterSpacing="0.1" />

                <!-- Z-Score Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Z-Score Anomaly Detection"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Detect when readings deviate from baseline"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/zScoreInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Z-Score Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/zScoreToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <!-- Z-Score config section -->
                    <LinearLayout
                        android:id="@+id/zScoreSection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="12dp"
                        android:visibility="gone">

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/pro_border"
                            android:layout_marginBottom="12dp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Sensitivity (σ)"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/zScoreSigmaSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="3"
                                android:progress="1" />

                            <TextView
                                android:id="@+id/zScoreSigmaValue"
                                android:layout_width="48dp"
                                android:layout_height="wrap_content"
                                android:text="2σ"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/zScoreDescription"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Confidence: 95%\nBalanced - alerts on significant anomalies"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp"
                            android:lineSpacingExtra="2dp" />
                    </LinearLayout>
                </LinearLayout>

                <!-- Rate of Change Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Rate of Change (ROC)"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Detect rapid increases or decreases"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/rocInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="ROC Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/rocToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <!-- ROC config section -->
                    <LinearLayout
                        android:id="@+id/rocSection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="12dp"
                        android:visibility="gone">

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/pro_border"
                            android:layout_marginBottom="12dp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Threshold"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/rocThresholdSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="98"
                                android:progress="8" />

                            <TextView
                                android:id="@+id/rocThresholdValue"
                                android:layout_width="64dp"
                                android:layout_height="wrap_content"
                                android:text="5.0%/s"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/rocDescription"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Balanced - detects moderate rate changes"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp" />
                    </LinearLayout>
                </LinearLayout>

                <!-- CUSUM Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="CUSUM Change Detection"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Detect subtle persistent shifts"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/cusumInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="CUSUM Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/cusumToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/cusumDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Cumulative sum analysis detects drift that static thresholds miss"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- ========== TIER 2: FORECASTING ========== -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="8dp"
                    android:text="FORECASTING &amp; PREDICTION"
                    android:textColor="@color/pro_magenta"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:letterSpacing="0.1" />

                <!-- Forecast Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Holt-Winters Forecast"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Predict future dose rate trends"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/forecastInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Forecast Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/forecastToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <!-- Forecast config section -->
                    <LinearLayout
                        android:id="@+id/forecastSection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="12dp"
                        android:visibility="gone">

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/pro_border"
                            android:layout_marginBottom="12dp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Alert threshold"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/forecastThresholdSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="100"
                                android:progress="5" />

                            <TextView
                                android:id="@+id/forecastThresholdValue"
                                android:layout_width="72dp"
                                android:layout_height="wrap_content"
                                android:text="0.5 µSv/h"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/forecastDescription"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Alert when forecasted dose rate will exceed this threshold within 60 seconds"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="12dp"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:text="Show forecast on chart"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <com.google.android.material.switchmaterial.SwitchMaterial
                                android:id="@+id/forecastChartToggle"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" />
                        </LinearLayout>
                    </LinearLayout>
                </LinearLayout>

                <!-- Predictive Crossing Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Predictive Threshold Crossing"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Warn before hitting Smart Alert thresholds"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/predictiveInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Predictive Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/predictiveToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <!-- Predictive config section -->
                    <LinearLayout
                        android:id="@+id/predictiveSection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="12dp"
                        android:visibility="gone">

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/pro_border"
                            android:layout_marginBottom="12dp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Warning time"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/predictiveSecondsSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="29"
                                android:progress="5" />

                            <TextView
                                android:id="@+id/predictiveSecondsValue"
                                android:layout_width="48dp"
                                android:layout_height="wrap_content"
                                android:text="1 min"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/predictiveDescription"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Warn 1 min before crossing any active Smart Alert threshold"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp" />
                    </LinearLayout>
                </LinearLayout>

                <!-- ========== TIER 3: ADVANCED STATISTICAL ANALYSIS ========== -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="8dp"
                    android:text="ADVANCED STATISTICAL ANALYSIS"
                    android:textColor="@color/pro_magenta"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:letterSpacing="0.1" />

                <!-- Poisson Uncertainty Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Poisson Uncertainty"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Show statistical confidence bounds"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/poissonInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Poisson Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/poissonToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/poissonDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Displays uncertainty bounds based on counting statistics"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- MA Crossover Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Moving Average Crossover"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Detect trend reversals"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/maCrossoverInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="MA Crossover Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/maCrossoverToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <!-- MA Crossover config section -->
                    <LinearLayout
                        android:id="@+id/maCrossoverSection"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="12dp"
                        android:visibility="gone">

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/pro_border"
                            android:layout_marginBottom="12dp" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Short window"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/maShortWindowSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="5"
                                android:progress="1" />

                            <TextView
                                android:id="@+id/maShortWindowValue"
                                android:layout_width="48dp"
                                android:layout_height="wrap_content"
                                android:text="10s"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:gravity="center_vertical"
                            android:orientation="horizontal">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Long window"
                                android:textColor="@color/pro_text_secondary"
                                android:textSize="13sp" />

                            <SeekBar
                                android:id="@+id/maLongWindowSeek"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="12dp"
                                android:layout_marginEnd="12dp"
                                android:max="8"
                                android:progress="1" />

                            <TextView
                                android:id="@+id/maLongWindowValue"
                                android:layout_width="48dp"
                                android:layout_height="wrap_content"
                                android:text="60s"
                                android:textColor="@color/pro_cyan"
                                android:textSize="14sp"
                                android:fontFamily="monospace"
                                android:gravity="end" />
                        </LinearLayout>

                        <TextView
                            android:id="@+id/maCrossoverDescription"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="8dp"
                            android:text="Detects Golden Cross (uptrend) and Death Cross (downtrend) signals"
                            android:textColor="@color/pro_text_muted"
                            android:textSize="12sp" />
                    </LinearLayout>
                </LinearLayout>

                <!-- Bayesian Changepoint Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Bayesian Changepoint"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Detect regime transitions"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/bayesianInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Bayesian Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/bayesianToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/bayesianDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Uses probability to identify when conditions fundamentally change"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- Autocorrelation Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="8dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Autocorrelation Patterns"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Find periodic signals (HVAC, machinery)"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/autocorrInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Autocorrelation Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/autocorrToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/autocorrDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Discovers hidden periodic patterns in radiation data"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- ========== TIER 4: GEOSPATIAL INTELLIGENCE ========== -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="8dp"
                    android:text="TIER 4: GEOSPATIAL INTELLIGENCE"
                    android:textColor="@color/pro_green"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:letterSpacing="0.1" />

                <!-- Location Anomaly Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Location-Aware Anomaly"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Compare to per-hexagon baselines"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/locationAnomalyInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Location Anomaly Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/locationAnomalyToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/locationAnomalyDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Detects readings unusual for THIS specific location"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- Spatial Gradient Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="12dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Spatial Gradient Analysis"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Point toward radiation sources"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/spatialGradientInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Spatial Gradient Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/spatialGradientToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/spatialGradientDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Calculates direction toward increasing radiation"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- Hotspot Prediction Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="12dp"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Hotspot Prediction"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Interpolate and predict hotspot locations"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/hotspotPredictionInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Hotspot Prediction Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/hotspotPredictionToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/hotspotPredictionDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Uses inverse-distance weighting to map radiation landscape"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- ========== VOICE ========== -->
                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="24dp"
                    android:layout_marginBottom="8dp"
                    android:text="VOICE ANNOUNCEMENTS"
                    android:textColor="@color/pro_magenta"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:letterSpacing="0.1" />

                <!-- Voice Card -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/card_background"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_vertical"
                        android:orientation="horizontal">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="VEGA Voice Alerts"
                                android:textColor="@color/pro_text_primary"
                                android:textSize="15sp" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginTop="2dp"
                                android:text="Speak statistical alert announcements"
                                android:textColor="@color/pro_text_muted"
                                android:textSize="12sp" />
                        </LinearLayout>

                        <ImageView
                            android:id="@+id/voiceInfoBtn"
                            android:layout_width="36dp"
                            android:layout_height="36dp"
                            android:src="@drawable/ic_info"
                            android:padding="6dp"
                            android:background="?attr/selectableItemBackgroundBorderless"
                            android:layout_marginEnd="8dp"
                            android:contentDescription="Voice Info" />

                        <com.google.android.material.switchmaterial.SwitchMaterial
                            android:id="@+id/voiceToggle"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <TextView
                        android:id="@+id/voiceDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Requires VEGA TTS to be enabled in main settings"
                        android:textColor="@color/pro_text_muted"
                        android:textSize="12sp" />
                </LinearLayout>

                <!-- Spacer at bottom -->
                <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="32dp" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>
</androidx.coordinatorlayout.widget.CoordinatorLayout>
